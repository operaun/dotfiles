#!/bin/bash
set -euo pipefail

{{ if eq .chezmoi.os "darwin" -}}
echo "üçé macOS ÏãúÏä§ÌÖú ÏÑ§Ï†ï Ï†ÅÏö© Ï§ë..."

# =============================================================================
# ÌÇ§Î≥¥Îìú
# =============================================================================
defaults write NSGlobalDomain KeyRepeat -int 2
defaults write NSGlobalDomain InitialKeyRepeat -int 15

# =============================================================================
# Finder ÏÑ§Ï†ï
# =============================================================================
defaults write com.apple.finder ShowPathbar -bool true
defaults write com.apple.finder ShowStatusBar -bool true
defaults write com.apple.finder AppleShowAllFiles -bool true
defaults write com.apple.finder _FXShowPosixPathInTitle -bool true

# Ìè¥Îçî Ïö∞ÏÑ† Ï†ïÎ†¨
defaults write com.apple.finder _FXSortFoldersFirst -bool true
defaults write com.apple.finder _FXSortFoldersFirstOnDesktop -bool true

# Ìè¥Îçî ÎÇ¥ Í≤ÄÏÉâ (ÌòÑÏû¨ Ìè¥ÎçîÏóêÏÑú Í≤ÄÏÉâ)
defaults write com.apple.finder FXDefaultSearchScope -string "SCcf"

# Í∏∞Î≥∏ Ï†ïÎ†¨: Ïù¥Î¶ÑÏàú
defaults write com.apple.finder FXPreferredViewStyle -string "Nlsv"
defaults write com.apple.finder FXArrangeGroupViewBy -string "Name"

# =============================================================================
# Dock
# =============================================================================
defaults write com.apple.dock autohide -bool true
defaults write com.apple.dock autohide-delay -float 0
defaults write com.apple.dock show-recents -bool false
defaults write com.apple.dock minimize-to-application -bool true

# =============================================================================
# Ïï†ÎãàÎ©îÏù¥ÏÖò ÏÜçÎèÑ Ï§ÑÏù¥Í∏∞
# =============================================================================
defaults write com.apple.dock expose-animation-duration -float 0.1
defaults write com.apple.dock workspaces-swoosh-animation-off -bool true
defaults write com.apple.dock autohide-time-modifier -float 0.2

# =============================================================================
# Ïä§ÌÅ¨Î¶∞ÏÉ∑
# =============================================================================
defaults write com.apple.screencapture location -string "$HOME/Desktop"
defaults write com.apple.screencapture type -string "png"
defaults write com.apple.screencapture disable-shadow -bool true

# =============================================================================
# Í∏∞ÌÉÄ
# =============================================================================
defaults write NSGlobalDomain AppleShowAllExtensions -bool true
defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true

# =============================================================================
# Í∏ÄÎ°úÎ≤å ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§ (NSUserKeyEquivalents)
# =============================================================================
# Ï†ÑÏ≤¥ÌôîÎ©¥ ÌÜ†Í∏Ä: Control + Command + F (Î™®Îì† Ïï±ÏóêÏÑú)
defaults write NSGlobalDomain NSUserKeyEquivalents -dict-add "Enter Full Screen" "@^f"
defaults write NSGlobalDomain NSUserKeyEquivalents -dict-add "Exit Full Screen" "@^f"
defaults write NSGlobalDomain NSUserKeyEquivalents -dict-add "Ï†ÑÏ≤¥ ÌôîÎ©¥ ÏãúÏûë" "@^f"
defaults write NSGlobalDomain NSUserKeyEquivalents -dict-add "Ï†ÑÏ≤¥ ÌôîÎ©¥ Ï¢ÖÎ£å" "@^f"

# =============================================================================
# ÏÑ§Ï†ï Ï†ÅÏö©
# =============================================================================
killall Finder Dock SystemUIServer cfprefsd 2>/dev/null || true

echo "‚úÖ macOS ÏãúÏä§ÌÖú ÏÑ§Ï†ï ÏôÑÎ£å"

# =============================================================================
# ÏàòÎèô ÏÑ§Ï†ï ÏïàÎÇ¥ (defaultsÎ°ú Î∂àÍ∞ÄÎä•Ìïú Ìï≠Î™©)
# =============================================================================
echo ""
echo "‚ÑπÔ∏è  ÏïÑÎûò Îã®Ï∂ïÌÇ§Îäî ÏãúÏä§ÌÖú ÌôòÍ≤ΩÏÑ§Ï†ïÏóêÏÑú ÏàòÎèô ÏÑ§Ï†ïÏù¥ ÌïÑÏöîÌï©ÎãàÎã§:"
echo "   ‚Ä¢ Îç∞Ïä§ÌÅ¨ÌÉë Î≥¥Í∏∞: Option + D"
echo "     ‚Üí ÏãúÏä§ÌÖú ÏÑ§Ï†ï > ÌÇ§Î≥¥Îìú > ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§ > Mission Control > Îç∞Ïä§ÌÅ¨ÌÉë Î≥¥Í∏∞"
echo "   ‚Ä¢ Dock ÌëúÏãú/Ïà®Í∏∞Í∏∞: Option + Shift + D"
echo "     ‚Üí ÏãúÏä§ÌÖú ÏÑ§Ï†ï > ÌÇ§Î≥¥Îìú > ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§ > Launchpad Î∞è Dock"
echo ""
{{- end }}
