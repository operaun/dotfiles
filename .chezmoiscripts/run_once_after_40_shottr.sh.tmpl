#!/bin/bash
set -euo pipefail

{{ if eq .chezmoi.os "darwin" -}}
# =============================================================================
# Shottr ì„¤ì •
# =============================================================================
# Shottr ë‹¨ì¶•í‚¤ëŠ” ì•± ë‚´ì—ì„œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.
# ì•„ë˜ëŠ” ì„¤ì • ì•ˆë‚´ì…ë‹ˆë‹¤.

echo "ğŸ“¸ Shottr ì„¤ì • ì•ˆë‚´"
echo ""
echo "Shottr ì•±ì„ ì—´ê³  ì•„ë˜ì™€ ê°™ì´ ë‹¨ì¶•í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:"
echo "  1. ë©”ë‰´ë°” ì•„ì´ì½˜ í´ë¦­ â†’ Settings â†’ Hotkeys"
echo "  2. Fullscreen screenshot: â‡§âŒ˜3"
echo "  3. Area screenshot: â‡§âŒ˜4"
echo ""
echo "ğŸ’¡ ì‹œìŠ¤í…œ ìŠ¤í¬ë¦°ìƒ· ë‹¨ì¶•í‚¤ì™€ ì¶©ëŒì„ í”¼í•˜ë ¤ë©´,"
echo "   ì‹œìŠ¤í…œ ì„¤ì • > í‚¤ë³´ë“œ > í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ > ìŠ¤í¬ë¦°ìƒ·ì—ì„œ"
echo "   ê¸°ì¡´ â‡§âŒ˜3, â‡§âŒ˜4ë¥¼ ë¹„í™œì„±í™”í•˜ì„¸ìš”."
echo ""

# Shottr plistê°€ ìˆìœ¼ë©´ ë‹¨ì¶•í‚¤ ì„¤ì • ì‹œë„
# (Shottrê°€ í•œ ë²ˆì´ë¼ë„ ì‹¤í–‰ë˜ì–´ì•¼ plist ìƒì„±ë¨)
if defaults read cc.ffitch.shottr &>/dev/null 2>&1; then
  # ì „ì²´í™”ë©´: Shift + Command + 3 (keyCode)
  defaults write cc.ffitch.shottr fullscreenHotkey -dict keyCode -int 20 modifiers -int 1179648
  # ì˜ì—­ ì„ íƒ: Shift + Command + 4
  defaults write cc.ffitch.shottr areaHotkey -dict keyCode -int 21 modifiers -int 1179648
  echo "âœ… Shottr ë‹¨ì¶•í‚¤ê°€ ìë™ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤."
fi
{{- end }}
